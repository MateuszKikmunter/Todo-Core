"use strict";$(document).ready(function(){var e={processing:!0,responsive:!0,serverSide:!0,deselectRowsOnPageChangeAndSearch:!0,disableDeleteEditButtonsOnPageChange:!0,searchDelay:500,language:{sSearch:"Search by name:"},select:{style:"single"},dom:"<'row'<'col-sm-12 col-md-6 mb-2'B>><'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",ajax:{url:"/get-items/",type:"GET",dataType:"json",data:function(e){return{options:JSON.stringify(e)}}},rowId:"id",columns:[{data:"id"},{data:"name",render:$.fn.dataTable.render.text()},{data:"deadline"},{data:"lastUpdated"},{data:"completed"}],columnDefs:[{targets:0,visible:!1,searchable:!1},{targets:1,searchable:!0,orderable:!0},{targets:2,searchable:!1,orderable:!0,render:function(e,t,a){return window.moment(e).format("DD/MM/YYYY HH:mm:ss")},type:"date-euro"},{targets:3,searchable:!1,orderable:!0,render:function(e,t,a){return window.moment(e).format("DD/MM/YYYY HH:mm:ss")},type:"date-euro"},{targets:4,searchable:!1,orderable:!0,className:"text-center",render:function(e,t,a){return"<i class='fa  "+(!0===a.completed?"fa-check text-success":"fa-times text-danger")+" item-state'></i>"}}],buttons:[{text:"<i class='fa fa-plus' aria-hidden='true'></i> Add",className:"btn btn-outline-success",action:function(){BootstrapModalController.setModalHeaderText("Create"),BootstrapModalController.getModal()}},{text:"<i class='fa fa-edit' aria-hidden='true'></i> Edit",className:"btn btn-outline-primary",enabled:!1,action:function(e,t,a,o){BootstrapModalController.setModalHeaderText("Edit"),BootstrapModalController.getModal({id:DatatablesController.getSelectedRow(t).id})}},{text:"<i class='fa fa-trash' aria-hidden='true'></i> Delete",className:"btn btn-outline-danger",enabled:!1,action:function(e,t,a,o){confirm("Are you sure?")&&$.ajax({url:"/delete-item/",type:"DELETE",dataType:"json",data:{id:DatatablesController.getSelectedRow(t).id,__RequestVerificationToken:$("input[name=__RequestVerificationToken]").val()},complete:function(e){n(e),DatatablesController.deselectRows(r)}})}}]},r=DatatablesController.initialize("items-table",e);BootstrapModalController.initialize({modalUri:"/get-item",onSaveCallback:function(){return DatatablesController.reloadTable(r)}}),$("#items-table").on("click","td i",function(){$.ajax({url:"/change-status/",type:"PUT",dataType:"json",data:{id:r.row($(this).parents("tr")).data().id,__RequestVerificationToken:$("input[name=__RequestVerificationToken]").val()},complete:function(e){return n(e)}})});var n=function(e){200===e.status?DatatablesController.reloadTable(r):alert("Something went wrong. Error: "+e.status+" - "+e.statusText)}});