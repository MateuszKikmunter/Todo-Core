"use strict";var BootstrapModalController=function(){var e=void 0,a=function(t){$.ajax({type:"GET",url:o(),data:t,dataType:"HTML",complete:function(t){l(t.responseText),u()}})},n=function(){return i().find("form")},i=function(){return $("#crud-modal")},o=function(){return i().attr("data-modal-uri")},r=function(){i().modal("hide")},d=function(){var t,a=$("#manipulate-item-form").serializeObject();$.ajax({url:(t=n(),"Create"===t.attr("data-form-action")?t.attr("data-create-url"):t.attr("data-edit-url")),headers:{RequestVerificationToken:a.__RequestVerificationToken},type:"Create"===n().attr("data-form-action")?"POST":"PUT",data:JSON.stringify(a),dataType:"json",contentType:"application/json"}).done(function(){e.onSaveCallback&&e.onSaveCallback(),r()}).fail(function(t){var a,e;a=t,(e=$("#item-validation-summary")).empty(),422===a.status?a.responseJSON.forEach(function(t){e.append("<li>"+t+"</li>")}):e.append("<li>Error code: "+a.status+". Message: "+a.statusText+".</li>"),e.parent().show(),$("#item-validation-alert").fadeTo(2e3,500).slideUp(500,function(){$("#item-validation-alert").slideUp(500)})})},l=function(t){$("#crud-modal-body-container").html(t)},u=function(){i().modal("show")},c=function(){var t=n();return $.validator.unobtrusive.parse(t),t.validate(),t.valid()};return{getModal:function(t){a(t)},hideModal:r,initialize:function(t){e=t,i().attr("data-modal-uri",t.modalUri),$("#save-modal-btn").click(function(){c()&&d()})},setModalHeaderText:function(t){i().find(".modal-title").text(t)}}}();